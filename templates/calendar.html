{% extends "base.html" %}

{% block title %}Календарь праздников{% endblock %}

{% block content %}
<div class="container header-content" style="margin-bottom:2rem;">
    <h1>Календарь праздников</h1>
    <div>
        <a href="/wishlist" style="color:#3b82f6; margin-right:1rem;">Мои списки</a>
        <a href="/logout" class="logout">Выйти</a>
    </div>
</div>

<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
    <div>
        <a href="/calendar?month={{ prev_month.split('-')[1] }}&year={{ prev_month.split('-')[0] }}" 
           style="font-size:1.5rem; text-decoration:none; margin-right:1rem;">←</a>
        <h2 style="display:inline; margin:0;">{{ current_month }} {{ current_year }}</h2>
        <a href="/calendar?month={{ next_month.split('-')[1] }}&year={{ next_month.split('-')[0] }}" 
           style="font-size:1.5rem; text-decoration:none; margin-left:1rem;">→</a>
    </div>

    <a href="/calendar/add" 
       style="padding:0.8rem 1.5rem; background:#3b82f6; color:white; border-radius:8px; text-decoration:none; font-weight:500;">
        + Настроить / добавить праздник
    </a>
</div>

{% if calendar_data %}
<div class="grid">
    {% for date, events in calendar_data.items() %}
    <div class="card">
        <h3 style="margin-top:0; color:#1e40af;">{{ date }}</h3>
        {% for event in events %}
        <div style="margin:1rem 0; padding:1rem; background:#f8fafc; border-radius:6px;">
            <strong>{{ event.title }}</strong>
            {% if event.description %}
            <p style="color:#4b5563; margin:0.5rem 0;">{{ event.description }}</p>
            {% endif %}
            {% if event.holiday_wishlists %}
            <div style="margin-top:0.8rem;">
                <strong>Прикреплённые вишлисты:</strong>
                <ul style="margin:0.5rem 0; padding-left:1.2rem;">
                    {% for hw in event.holiday_wishlists %}
                    <li>
                        <a href="/wishlist/{{ hw.wishlists.id }}" style="color:#3b82f6;">
                            {{ hw.wishlists.title }}
                        </a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endfor %}
</div>
{% else %}
<p style="text-align:center; color:#9ca3af; padding:4rem;">
    Пока нет праздников на этот месяц<br>
    Добавьте первый выше ↑
</p>
{% endif %}
{% endblock %}
